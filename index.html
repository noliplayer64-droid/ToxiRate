<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ToxiMap – Venom Risk Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f1220;
      color: #eaeaf0;
      padding: 20px;
    }
    h1, h2 {
      color: #ffb703;
    }
    .box {
      background: #1a1d33;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 8px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, select, button {
      margin-top: 5px;
      padding: 6px;
      width: 100%;
      max-width: 300px;
    }
    button {
      margin-top: 15px;
      background: #ffb703;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    .result {
      font-size: 1.2em;
      margin-top: 10px;
      color: #90dbf4;
    }
    table {
      border-collapse: collapse;
      margin-top: 10px;
    }
    td, th {
      border: 1px solid #555;
      padding: 6px 10px;
    }
    .note {
      font-size: 0.9em;
      color: #bbb;
    }
  </style>
</head>
<body>

<h1>ToxiMap</h1>
<p class="note">
A venom lethality visualization and safety tool for education and awareness.
</p>

<div class="box">
  <h2>Venom Units Explained</h2>
  <ul>
    <li><strong>HLT (Human Lethality Threshold):</strong> Estimated number of stings (or equivalent venom units) required to cause fatal systemic effects in an average human without medical intervention.</li>
    <li>Lower HLT = more dangerous venom</li>
    <li>Higher HLT = less dangerous venom</li>
    <li><strong>COW (Collapse Onset Window):</strong> Time in minutes before systemic failure or death begins after envenomation. Basically when you will die if you arent treated. passed 24 hours means it is a 1/10, so you can not enter that input.</li>
    <li><strong>PRR (Poison Risk Rating):</strong> Final danger score from 1–10.</li>
  </ul>
</div>

<div class="box">
  <h2>Species Catalogue</h2>
  <label for="species">Select a species:</label>
  <select id="species" onchange="fillSpecies()">
    <option value="">-- Select --</option>
    <option value="boxjelly">Box Jellyfish</option>
    <option value="funnelweb" data-hlt="1" data-cow="15">Sydney Funnel-web Spider</option>

  </select>
</div>

<div class="box">
  <h2>PRR Calculator</h2>

  <label for="hlt">HLT (number of stings):</label>
  <input type="number" id="hlt" placeholder="e.g. 1">

  <label for="cow">COW (minutes to collapse/death):</label>
  <input type="number" id="cow" placeholder="e.g. 5">

  <button onclick="calculatePRR()">Calculate PRR</button>

  <div class="result" id="output"></div>
</div>

<div class="box">
  <h2>PRR Scale</h2>
  <table>
    <tr><th>PRR</th><th>Meaning</th></tr>
    <tr><td>1–2</td><td>Low concern, mild effects</td></tr>
    <tr><td>3–4</td><td>Painful, medical attention advised</td></tr>
    <tr><td>5–6</td><td>Severe envenomation possible</td></tr>
    <tr><td>7–8</td><td>Critical, emergency treatment required</td></tr>
    <tr><td>9–10</td><td>Rapidly lethal without intervention</td></tr>
  </table>
</div>

<div class="box">
  <h2>Research Log</h2>
  <p class="note">Use this space to record species you’ve researched.</p>
  <table contenteditable="true">
    <tr>
      <th>Species</th>
      <th>HLT</th>
      <th>COW</th>
      <th>PRR</th>
      <th>Notes</th>
    </tr>
    <tr>
      <td></td><td></td><td></td><td></td><td></td>
    </tr>
  </table>
</div>

<script>
function fillSpecies() {
  const species = document.getElementById("species").value;
  if (species === "boxjelly") {
    document.getElementById("hlt").value = 1;
    document.getElementById("cow").value = 5;
  }
}

function calculatePRR() {
  const hlt = parseFloat(document.getElementById("hlt").value);
  const cow = parseFloat(document.getElementById("cow").value);

  if (hlt <= 0 || cow <= 0 || isNaN(hlt) || isNaN(cow)) {
    document.getElementById("output").innerText =
      "Please enter valid HLT and COW values.";
    return;
  }

  // Normalize values
  const hltScore = Math.min(10, 10 / hlt);
  const cowScore = Math.min(10, 10 / (cow / 5));

  const prr = Math.min(10, Math.max(1, Math.round((hltScore + cowScore) / 2)));

  document.getElementById("output").innerText =
    "Poison Risk Rating (PRR): " + prr + " / 10";
}
</script>

</body>
</html>
